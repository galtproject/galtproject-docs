# MultiSig governance
## Проблема
В первоначальной реализации Galt Space имеет права owner-а для управления ключевыми контрактами сети. Owner управляет следующими вещами:

* Изменение комиссий протокола
* Обновление контрактов

Чтобы отказаться от такой централизованной системы в пользу децентрализованной, необходимо предоставить сообществу возможность управления вышеперечисленымми параметрами.

## Предлагаемое решение
Разработать набор смарт-контрактов, которые предоставят сообществам в лице мультисигов возможность принимать те или иные решение путем голосования.

## Спецификация
### GlobalVoting контракт
#### Принимает proposal-ы от мультисигов.
Созание пропозало разрешено от любого валидного контракта мультисига. Для этого действия, должен быть создан внутренний т.н. "локальный proposal на глобальный proposal" в мультисиге. Если он набирает опредленный theshold, выполняется permission-less метод и создается глобальный proposal.

#### Голосование
Для того, чтобы выполнить глобальный proposal, необходимо, чтобы в каждом мультисиге был создан локальный proposal на добавление и по нему было пройдено голосование.

#### Содержание proposal-а
Каждое предложение содержит следующие данные:
* адрес контракта для выполнения
* кол-во ETH для отправки
* bytecode для выполнения

#### Пороги
Существуют порог по умолчанию и кастомные пороги.
Кастомные пороги задаются для комбинаций [адрес контракта, функция для выполнения]
Изменение любого кастомного и дефолтного порогов выполняется с помощью голосования, так же как и изменения данных в других контрактах, владельцем которых является контракт голосования.

#### Выполнение proposal-а
Proposal может быть выполнен при достижении определенного порога репутации

* Tg - необходимый порог репутации, достигнув который, можно выполнить proposal (процент 0 < T <= 100)
* Vg - набранный процент глобальной репутации
* Tn - необходимый порог репутации в мультисиге, при достижении которого, голос мультисига будет считаться 'За'
* Vn - набранный порог репутации в мультисиге
* MR - репутация мультисига
* OSR - oracle stake reputation
* DSR - delegate space reputation
* DGR - delegate galt reputation

* n - локальное значение для мультисига
* g - глобальное общее значение

```
// proposal считается принятым, если текущая набранная репутация проголосовавших
// ЗА мультисигов больше необходимого порога
APPROVED = Vg > Tg
// текущая набранная репутация проголосовавших за мултисигов
Vg = M1 + M2 + Mn
// репутация мультисига (учитывается только, если набран необходимый порог голосов ЗА)
Mn = (Vn > Tn ? 1 : 0) * ((DSRn/DSRg * 40/100) + (DGRn/DGRg * 30/100) + (OSRn/OSRg * 30/100))
```

#### Обновление контракта
Контракт разворачивается с proxy оберткой. В случае, если необходимо обновить его логику, выполняется соответствующий метод.

### Типы proposal-ов
* Глобальный - выполнить какое-либо значение от лица контракта голосования
* Локальный на создание - создать глобальный proposal
* Локальный на поддержку - поддержать глобальный proposal
